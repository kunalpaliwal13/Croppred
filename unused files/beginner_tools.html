<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel = "stylesheet" href = "/static/beginner_tools.css">
    <!-- <link rel = "stylesheet" href = "static/styles.css"> -->
</head>
<body>
    
    <h1 class = 'title'>AI Crop RecommendationðŸŒ±</h1>

    <div class="container">
        
        <div class="card">
        <h2 class = 'title2'>Temprature : <spana id='temp'></span>  </h2>
        <h2 class = 'title2'>Humidity : <span id='humidity'></span></h2>
        <h2 class = 'title2'>Wind Speed & Degree : <span id='wind'></span>   </h2>
        <h2 class = 'title2'>Sunset And Sunrise Time : <span id='sun'></span></h2>
        <input class = 'labelbox' type="search" id="search" placeholder="City Name">
        <br>
        <input class = 'btn' onclick="findCity()" type="submit" id="citybtn">
        </div>


    </div>
    
</body>
<script>
    const apiCall = async (cityName) => {
    let api = `https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=3ba0e5eedae49070b51c85ad8c30def0&units=metric`;

    try {
        const response = await fetch(api);
        

        if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
        }

        const json = await response.json();
        console.log(json)

        // sunset and sunrise 
        const sunriseTimestamp = json['sys']['sunrise'];
        const sunsetTimestamp = json['sys']['sunset'];
        const sunriseDate = new Date(sunriseTimestamp * 1000);
        const sunsetDate = new Date(sunsetTimestamp * 1000);
        const formatTime = (date) => {
            return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
          };
        const sunriseTime = formatTime(sunriseDate);
        const sunsetTime = formatTime(sunsetDate);
          
        document.getElementById('temp').innerHTML= json['main']['temp'];
        document.getElementById('humidity').innerHTML= json['main']['humidity'];
        document.getElementById('wind').innerHTML= json['wind']['speed']+ ", "+ json['wind']['deg'];
        document.getElementById('sun').innerHTML= sunriseTime+  " & "+ sunsetTime;
        console.log('temp' + json['main']['temp'])
        console.log('humidity' + json['main']['humidity'])

        // ... rest of the function remains unchanged
    } catch (error) {
        console.error('Error fetching data', error);
    }
};

        // Call the function with the desired city name, for example, 'Mumbai'
        apiCall('Mumbai');

        function findCity() {
            search = document.querySelector('#search').value;

            apiCall(search)
        }

</script>
</html>